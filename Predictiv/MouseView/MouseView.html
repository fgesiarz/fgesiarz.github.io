<!DOCTYPE html>
<html>
<head>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPysch/jspsych.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPysch/plugins/jspsych-html-button-response.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/plugins/jspsych-preload.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/plugins/jspsych-fullscreen.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/plugins/jspsych-instructions.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/plugins/jspsych-survey-multi-select.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jspsych-mouseview-start.js"></script>
    <script src="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jspsych-mouseview-stop.js"></script>
    <link rel="stylesheet" href="https://raw.githubusercontent.com/fgesiarz/fgesiarz.github.io/master/Predictiv/MouseView/jsPsych/css/jspsych.css"></link>
    <style>
        img {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body></body>
<script>



    var timeline = [];

    var mouseview_trial_start = ()=> {
        mouseview.logEvent('Trial Started')
    }
    var mouseview_trial_end = ()=> {
        mouseview.logEvent('Trial Ended')
    }
    var mouseview_parms = () => {
        mouseview.params.apertureSize = '7%'
        mouseview.params.apertureGauss = 30
        mouseview.params.overlayColour = 'White' //i.e. hex black
        mouseview.params.overlayAlpha = 0.85
        mouseview.params.overlayGaussian = 5
    }
    var mouseview_heatmap = () => {
        mouseview.plotHeatMap()
    }
    var mouseview_clear_heatmap = () => {
        mouseview.clearHeatMap()
    }



    var images = ['A%20-%20current%20design.png']

    timeline.push({
        type: 'preload',
        auto_preload: true, // automatically load all files based on the main timeline
        images: images
    });


    timeline.push({
        type: 'instructions',
        pages: ['<head>\n' +
        '    <meta charset="UTF-8">\n' +
        '    <style>\n' +
        '        li {font-size: 24px;\n' +
        '        margin-left: 10px;\n' +
        '        list-style-type: disc;\n' +
        '        }\n' +
        '        p {\n' +
        '            font-size: 24px;\n' +
        '        }\n' +
        '\n' +
        '        body {\n' +
        '            font-family: Helvetica, sans-serif;\n' +
        '            line-height: 1.5;\n' +
        '        }\n' +
        '    \n' +
        '    </style>\n' +
        '</head>\n' +
        '<body>\n' +
        '<div style="display:block; margin-left: auto; margin-right: auto;">\n' +
        '    <div style="display:block; margin-left: auto; margin-right: auto; width: 50%; max-width: 1000px"><img src=\'Predictiv_logo.png\' width="100%"></img></div>\n' +
        '    <div style="display:block; margin-left: auto; margin-right: auto; width: 50%;">\n' +
        '        <div style = "text-align: center;"><p>Welcome to the Predictiv experiment! <br><br></p></div>\n' +
        '        <p>Your task:</p><br>\n' +
        '        <ul>\n' +
        '            <li>On the next few screens we will ask you to locate some information on a website and answer a few questions about it afterwards.</li><br>\n' +
        '            <li>Your task will be made more difficult by blurring of the website as in the example below.</li><br>\n' +
        '            <li>You will be able to make some parts of the website clear with your mouse.</li><br>\n' +
        '        </ul>\n' +
        '    </div>\n' +
        '    <div class="example" style="display:block; margin-left: auto; margin-right: auto; width: 50%; max-width: 800px"><img src=\'BIT_example2.png\' width="100%" ></img></div>\n' +
        '</div>\n' +
        '\n' +
        '\n' +
        '</body>'],
        show_clickable_nav: true
    });


    timeline.push({
        type: 'fullscreen',
        message: '<div style="display:block; margin-left: auto; margin-right: auto; width: 50%; max-width: 1000px"><img src=\'Predictiv_logo.png\' width="100%"></img></div><br><br>\n' +
            '<p>On the next screen, we will show you some information about booking coronavirus tests.</p><br><br>\n' +
            '<p>The website will flash on the screen for 2 seconds.<br> Afterwards, it will become blurred and you will be able to explore it with your mouse for 20 seconds.</p><br><br>\n' +
            '<p><b>Finally, we will ask you some questions about the website content so please try to learn as much as possible from it.</b></p><br><br>\n' +

            '<p>The experiment will switch to full screen mode when you press the button below. <br><br> To exit fullscreen, please press ESC.</p>',
        fullscreen_mode: true
    });

    timeline.push({
        type: 'Mouseview-Start'
    })

    timeline.push({
        type: 'html-keyboard-response',
        stimulus: '<div></div><br><div>\n' +
            '    <div><img src=\'A%20-%20current%20design.png\' height = 100% style = "width: 50%;"></img></div>\n' +
            '</div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: 2000,
        on_start: mouseview_trial_start,

    });

    timeline.push({
        type: 'html-keyboard-response',
        stimulus: '<div></div><br><div>\n' +
            '    <div><img src=\'A%20-%20current%20design.png\' height = 100% style = "width: 50%;"></img></div>\n' +
            '</div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: 20000,
        on_start: mouseview_parms,
        on_end: mouseview_trial_end
    });

    timeline.push({
        type: 'Mouseview-Stop'
    })

    timeline.push({
        type: 'survey-multi-select',
        questions: [
            {
                prompt: "According to the page you just saw, how can you get a coronavirus test? \n" +
                    "\n" +
                    "Please select all that apply.",
                options: ["Order a test through your employer", "Visit a testing area in a local supermarket",  "Visit a walk-through site", "Order a test at home", "Visit your GP", "Visit a drive-through site"],
                horizontal: false,
                required: true,
                name: 'Colors'
            }
        ]
    });

    timeline.push({
        type: 'html-keyboard-response',
        stimulus: '<div style ="font-size: 32px"><b>THIS IS HOW YOU EXPLORED THE WEBSITE.</b></div><br><div>\n' +
            '    <div><img src=\'A%20-%20current%20design.png\' height = 100% style = "width: 50%;"></img></div>\n' +
            '</div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: 7000,
        on_start: mouseview_heatmap,
        on_end: mouseview_clear_heatmap
    });


    timeline.push({
        type: 'fullscreen',
        fullscreen_mode: false
    });

    timeline.push({
        type: 'instructions',
        pages: ['<head>\n' +
        '    <meta charset="UTF-8">\n' +
        '    <style>\n' +
        '        li {font-size: 24px;\n' +
        '        margin-left: 10px;\n' +
        '        list-style-type: disc;\n' +
        '        }\n' +
        '        p {\n' +
        '            font-size: 24px;\n' +
        '        }\n' +
        '\n' +
        '        body {\n' +
        '            font-family: Helvetica, sans-serif;\n' +
        '            line-height: 1.5;\n' +
        '        }\n' +
        '    \n' +
        '    </style>\n' +
        '</head>\n' +
        '<body>\n' +
        '<div style="display:block; margin-left: auto; margin-right: auto;">\n' +
        '    <div style="display:block; margin-left: auto; margin-right: auto; width: 50%; max-width: 1000px"><img src=\'Predictiv_logo.png\' width="100%"></img></div>\n' +
        '    <div style="display:block; margin-left: auto; margin-right: auto; width: 50%;">\n' +
        '        <div style = "text-align: center;"><p>That is the end. Thank you for participating!<br><br></p></div>\n' +
        '    </div>\n' +
        '</div>\n' +
        '\n' +
        '\n' +
        '</body>'],
        show_clickable_nav: false,
        on_start: mouseview_clear_heatmap
    });

    jsPsych.init({
        timeline: timeline,
        default_iti: 0

    });

</script>
</html>